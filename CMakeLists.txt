cmake_minimum_required(VERSION 2.8.4)
project(GeneticPainter)

# CXX flags
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")

# CMake directories
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY "${CMAKE_CURRENT_SOURCE_DIR}/bin")
set(CMAKE_SRC_DIR                  "${CMAKE_CURRENT_SOURCE_DIR}/src")
set(CMAKE_INCLUDE_DIR              "${CMAKE_CURRENT_SOURCE_DIR}/include")
set(CMAKE_TEST_DIR                 "${CMAKE_CURRENT_SOURCE_DIR}/tests")

include_directories("${CMAKE_INCLUDE_DIR}")

# main file used to differentiate between main() generated by Catch unit testing
# framework, and main() used to execute the application
set(MAIN_FILE main.cpp)
set(MAIN_TEST_FILE ${CMAKE_TEST_DIR}/mainTest.cpp)

set(SOURCE_FILES

)

set(TEST_FILES
    ${CMAKE_TEST_DIR}/ColorTest.cpp
    ${CMAKE_TEST_DIR}/EllipseTest.cpp
    ${CMAKE_TEST_DIR}/Vector2Test.cpp
)

add_executable(GeneticPainter
    ${MAIN_FILE}
    ${SOURCE_FILES}
)

add_executable(GeneticPainterTest
    ${MAIN_TEST_FILE}
    ${TEST_FILES}
    ${SOURCE_FILES}
)

add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/GeneticAlgorithm)

# Command used to execute unit tests after build
add_custom_command(
    TARGET GeneticPainterTest
    POST_BUILD
    COMMAND ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/GeneticPainterTest
)

enable_testing(true)
add_test(
    NAME all
    COMMAND GeneticPainterTest
)